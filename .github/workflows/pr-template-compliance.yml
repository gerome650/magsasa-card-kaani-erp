name: PR Template Compliance

on:
  pull_request:
    types: [opened, edited, synchronize]

permissions:
  contents: read
  pull-requests: read

jobs:
  pr-template-compliance:
    name: pr-template-compliance
    runs-on: ubuntu-latest
    steps:
      - name: Check PR template compliance
        uses: actions/github-script@v7
        with:
          script: |
            const pr = context.payload.pull_request;
            const body = pr.body || '';
            
            const requiredSections = [
              'Local Gate',
              'Mini Regression Gate',
              'Full Regression Gate'
            ];
            
            const missingSections = requiredSections.filter(section => 
              !body.includes(section)
            );
            
            if (missingSections.length > 0) {
              core.setFailed(
                `PR template is missing required sections:\n` +
                missingSections.map(s => `- ${s}`).join('\n') +
                `\n\nPlease use the PR template and fill out all required sections.`
              );
            } else {
              console.log('âœ… PR template contains all required sections');
            }
